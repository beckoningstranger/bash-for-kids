LEKTION 6 ‚Äì DIE CHEF-MASCHINE: SUBSTITUTION $(...) üß†üè≠

GESCHICHTE

In der Maschinenfabrik gibt es jetzt eine neue Maschine: die Chef‚ÄëMaschine.
Sie arbeitet nicht direkt mit Schrauben und Sensoren ‚Äì sie arbeitet mit ERGEBNISSEN.

Die Sekret√§rin sagt:
‚ÄûIch brauche den Bericht automatisch. Keine Zahlen abschreiben!‚Äú

Papa meint:
‚ÄûDas ist ein Job f√ºr dich.‚Äú

Heute lernst du:
$(...)  (Substitution)

========================================
SPIEL STARTEN / ZUR√úCKSETZEN

Spiel vorbereiten:
bash spiel-vorbereiten.sh

Wenn etwas schief geht:
bash neustart.sh

========================================
ERKL√ÑRUNG 1 ‚Äì echo (Text ausgeben)

echo gibt Text aus.

AUFBAU:
echo TEXT

Beispiele:
echo Hallo
echo "Hallo Welt"
echo "Zahl: 42"

echo ist super, um Zeilen f√ºr einen Bericht zu bauen.

========================================
ERKL√ÑRUNG 2 ‚Äì Substitution $(...)

Substitution bedeutet:
Ein Befehl l√§uft zuerst.
Sein Ergebnis (Text) wird danach in einen anderen Befehl eingesetzt.

So sieht das aus:
$(BEFEHL)

Du kannst dir das wie eine Maschine in einer Maschine vorstellen:
- innen l√§uft ein Befehl und produziert Text
- au√üen benutzt du diesen Text

Beispiele:
echo "Zeilen: $(wc -l datei.txt)"
echo "Fehler: $(cat logs/roboter-*.log | grep FEHLER | wc -l)"

WICHTIG:
Die Shell macht es in dieser Reihenfolge:
1) Sie f√ºhrt den Befehl in $(...) aus
2) Sie ersetzt $(...) durch das Ergebnis
3) Erst dann startet der √§u√üere Befehl (z.B. echo)

========================================
AUFGABE

Im Ordner spiel/logs liegen wieder Log‚ÄëDateien.

Du sollst ZWEI Dinge erstellen:

A) Ein Skript:
bericht-erstellen.sh

B) Eine Datei (wird vom Skript erzeugt):
spiel/bericht/diagnose.txt

diagnose.txt muss GENAU 3 Zeilen haben:

WARNUNGEN: <ZAHL>
FEHLER: <ZAHL>
OK: <ZAHL>

Dabei gilt:
- WARNUNGEN z√§hlt Zeilen mit dem Wort WARNUNG
- FEHLER z√§hlt Zeilen mit dem Wort FEHLER
- OK z√§hlt Zeilen, die mit ‚ÄûOK ‚Äú anfangen

WICHTIG:
Die Zahlen d√ºrfen NICHT von Hand eingetippt sein.
Sie m√ºssen mit $(...) berechnet werden.

========================================
HINWEIS ‚Äì Wie du starten kannst

1) Teste zuerst die inneren Befehle im Terminal, z.B.:
cat spiel/logs/roboter-*.log | grep WARNUNG | wc -l

2) Wenn die Zahl stimmt, baue sie in echo ein:
echo "WARNUNGEN: $(...)"

3) Schreibe in die Datei:
>  f√ºr die erste Zeile (√ºberschreibt)
>> f√ºr die n√§chsten Zeilen (h√§ngt an)

Form (nur die Form, keine komplette L√∂sung):
echo "WARNUNGEN: $(...)" > spiel/bericht/diagnose.txt
echo "FEHLER: $(...)" >> spiel/bericht/diagnose.txt
echo "OK: $(...)" >> spiel/bericht/diagnose.txt

========================================
PR√úFEN

Wenn du glaubst, du bist fertig:
bash l√∂sen.sh

l√∂sen.sh pr√ºft:
- ob diagnose.txt stimmt
- ob du in bericht-erstellen.sh wirklich $(...) benutzt hast
